<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io('http://libertyy.herokuapp.com');
    
    function log(msg) {
      console.log(msg);
    }
    
    /* SERVER SIDE EVENTS */
    
    // Receive player list (on connection)
    socket.on('players', function(players){
      log('Received players list');
      log(players);
      $('.players').text(players.length)
    });
    
    // Receive
    socket.on('initia', function(self){
      log('Self player object');
      log(self);
    });
    
    // Receive new player (when new player enters game)
    socket.on('player', function(player){
      log('Receive new player');
      log(player);
    });
    
    // Receive time left (every second)
    socket.on('time', function(time){
      $('.time').text(time);
    });
    
    // Receiving log
    socket.on('log', function(msg) {
      $('#log').append('<p>'+msg+'</p>')
    });
    
    /* CLIENT SIDE EVENTS */
    
    $(document).ready( function() {
    
      // Client moving up
      $('.move-up').on('click', function() {
        socket.emit('move', 'up');
      });
      $('.move-right').on('click', function() {
        socket.emit('move', 'right');
      });
      $('.move-left').on('click', function() {
        socket.emit('move', 'left');
      });
      $('.move-down').on('click', function() {
        socket.emit('move', 'down');
      });
    
    });
    
  </script>
  
  <style>
    #server {
      background: whitesmoke;
      left: 0;
      padding: 10px;
      position: fixed;
      top: 0;
      width: 100%;
    }
    
    #log {
      padding-top: 25px;
    }
  </style>
  
</head>

<body>
  <div id="server">
    <span class="players"></span> players | 
    <span class="time"></span> seconds left
  </div>
  
  <div id="log">
  </div>
  
</body>

</html>
